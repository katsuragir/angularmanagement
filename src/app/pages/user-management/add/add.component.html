<nb-card>
    <nb-card-header>{{title}}</nb-card-header>
    <nb-card-body>
        <form  [formGroup]="dynamicForm" (ngSubmit)="onSubmit()">
            <div *ngFor="let user of t.controls; let i = index" [formGroup]="user">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" class="form-control" id="username" placeholder="Enter username" formControlName="username" [ngClass]="{ 'is-invalid': submitted && user.controls.username.errors }" required>
                    <div *ngIf="submitted && user.controls.username.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>First Name</label>
                    <input type="text" class="form-control" id="firstname" placeholder="Enter first name" formControlName="firstname" [ngClass]="{ 'is-invalid': submitted && user.controls.firstname.errors }" required>
                    <div *ngIf="submitted && user.controls.firstname.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" class="form-control" id="lastname" placeholder="Enter last name" formControlName="lastname" [ngClass]="{ 'is-invalid': submitted && user.controls.lastname.errors }" required>
                    <div *ngIf="submitted && user.controls.lastname.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter email" formControlName="email" [ngClass]="{ 'is-invalid': submitted && user.controls.email.errors }" required>
                    <div *ngIf="submitted && user.controls.email.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>Birth Date</label>
                    <div class="input-group">
                        <input class="form-control" placeholder="dd/mm/yyyy"
                               name="d2" [maxDate]="maxDate" ngbDatepicker #d2="ngbDatepicker" formControlName="birhdate" [ngClass]="{ 'is-invalid': submitted && user.controls.birhdate.errors }" required>
                        <div class="input-group-append">
                          <button class="btn btn-outline-secondary calendar" (click)="d2.toggle()" type="button"></button>
                        </div>
                    </div>
                    <div *ngIf="submitted && user.controls.birhdate.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>Basic Salary</label>
                    <input type="number" class="form-control" id="basicsalary" placeholder="0" formControlName="basicsalary" [ngClass]="{ 'is-invalid': submitted && user.controls.basicsalary.errors }" required>
                    <div *ngIf="submitted && user.controls.basicsalary.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select class="form-control" id="status" formControlName="status" [ngClass]="{ 'is-invalid': submitted && user.controls.status.errors }" required>
                        <option value="Active">Active</option>
                        <option value="Deactive">Deactive</option>
                    </select>
                    <div *ngIf="submitted && user.controls.status.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>Group</label>
                    <input type="text" class="form-control" id="group" placeholder="Enter group" formControlName="group" [ngClass]="{ 'is-invalid': submitted && user.controls.group.errors }" [ngbTypeahead]="search" [resultFormatter]="formatter" required>
                    <div *ngIf="submitted && user.controls.group.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <div class="input-group">
                        <input class="form-control" placeholder="dd/mm/yyyy"
                               name="d1" [maxDate]="maxDate" ngbDatepicker #d1="ngbDatepicker" formControlName="description" [ngClass]="{ 'is-invalid': submitted && user.controls.description.errors }" required>
                        <div class="input-group-append">
                          <button class="btn btn-outline-secondary calendar" (click)="d1.toggle()" type="button"></button>
                        </div>
                    </div>
                    <div *ngIf="submitted && user.controls.description.errors" class="invalid-feedback">
                        Required
                    </div>
                </div>
            </div>
            <button class="btn btn-danger" style="margin-right: 10px;" (click)="return()">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
        </form>
    </nb-card-body>
</nb-card>